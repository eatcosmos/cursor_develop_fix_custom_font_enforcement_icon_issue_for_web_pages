function tl(a,b){return chrome.i18n.getMessage(a,b)}function isErrorOccurred(){return chrome.runtime.lastError?(console.log("ERROR: "+chrome.runtime.lastError.message),!0):!1}function simpleErrorHandler(a){if(isErrorOccurred())return alert(a),!0}function $(a,b){return(b||document).querySelector(a)}function $$(a,b){return(b||document).querySelectorAll(a)}
function $$$(a,b,e,f){a=document.createElement(a);for(var d in b)a[d]=b[d];for(var c in e)a.setAttribute(c,e[c]);for(var g in f)a.style[g]=f[g];return a}function fixName(a){a=a.replace(/['"]/g,"");return/^(?:serif|sans-serif|cursive|fantasy|monospace)$/.test(a)?a:'"'+a+'"'}
function init(a){var b=a["font-cjk"],e=a["font-latin"],f=a["font-fixed"],d=a["font-other"],c=[];b&&(d?(c.push("@font-face{font-style:normal;font-family:"+fixName(b)+";src:local("+fixName(d)+")}"),c.push("@font-face{font-style:bolder;font-family:"+fixName(b)+";src:local("+fixName(d)+")}"),c.push("@font-face{font-style:normal;font-family:"+fixName(b)+";src:local("+fixName(b)+");unicode-range:U+0-FF,U+2E80-9FFF,U+F900-FAFF,U+FE30-FE4F,U+20000-2FA1F}"),c.push("@font-face{font-style:bolder;font-family:"+
fixName(b)+";src:local("+fixName(b)+");unicode-range:U+0-FF,U+2E80-9FFF,U+F900-FAFF,U+FE30-FE4F,U+20000-2FA1F}")):(c.push("@font-face{font-style:normal;font-family:"+fixName(b)+";src:local("+fixName(b)+")}"),c.push("@font-face{font-style:bolder;font-family:"+fixName(b)+";src:local("+fixName(b)+")}")),e&&(c.push("@font-face{font-style:normal;font-family:"+fixName(b)+";src:local("+fixName(e)+");unicode-range:U+0-FF}"),c.push("@font-face{font-style:bolder;font-family:"+fixName(b)+";src:local("+fixName(e)+
");unicode-range:U+0-FF}")),c.push(":not(pre):not(code):not(textarea):not(tt):not(kbd):not(samp):not(var){font-family:"+fixName(b)+"!important}"),f||(c.push("pre,code,textarea,tt,kbd,samp,var{font-family:monospace!important}"),c.push("pre *,code *,textarea *,tt *,kbd *,samp *,var *{font-family:monospace!important}")));f&&(c.push("pre,code,textarea,tt,kbd,samp,var{font-family:"+fixName(f)+"!important}"),c.push("pre *,code *,textarea *,tt *,kbd *,samp *,var *{font-family:"+fixName(f)+"!important}"));
a=a.transformations;var g,h;for(g in a)for(b=a[g]||[],f=0;d=b[f];++f)console.log(d),e=d[0],d=d[1],h="",g&&e&&(d&&(h=";unicode-range:U+"+d.replace(/,/g,",U+")),c.push("@font-face{font-style:normal;font-family:"+fixName(g)+";src:local("+fixName(e)+")"+h+"}"),c.push("@font-face{font-style:bolder;font-family:"+fixName(g)+";src:local("+fixName(e)+")"+h+"}"));0<c.length&&((g=document.getElementById("Force_Custom_Fonts"))&&g.remove(),document.documentElement.insertBefore($$$("style",{innerHTML:c.join("")},
{id:"Force_Custom_Fonts",type:"text/css"}),document.documentElement.firstChild))}var Config=chrome.storage.sync,LocalConfig=chrome.storage.local;NodeList.prototype.toArray=function(){var a=[];i=0;for(l=this.length;i<l;++i)a.push(this[i]);return a};LocalConfig.get({off:!1},function(a){simpleErrorHandler(tl("error_settings_load"))||a.off||Config.get({"font-cjk":"","font-latin":"","font-fixed":"","font-other":"",transformations:{}},function(a){simpleErrorHandler(tl("error_settings_load"))||init(a)})});
